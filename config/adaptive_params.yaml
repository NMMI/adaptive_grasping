# Parameters for adaptive_grasping package
# Remember that there can be other important constants that can only be changed
# from the src code.

adaptive_grasping:
  # The topic where the finger touches data is published
  touch_topic_name: "/touching_finger_topic"
  # The following map contains the correspondance between ids and link names
  link_names_map:
    "1" : "right_hand_thumb_distal_link"
    "2" : "right_hand_index_distal_link"
    "3" : "right_hand_middle_distal_link"
    "4" : "right_hand_ring_distal_link"
    "5" : "right_hand_little_distal_link"
  # The following map contains other necessary params for adaptive_grasping
  params_map:
    world_name: "world"
    palm_name: "right_hand_ee_link"
    ee_name: "right_hand_ee_link"
  # The array containing the number of links of each finger
  joints_num: [5, 7, 7, 7, 7]
  # The following list of arrays is the contact selection matrix H (CHANGE ALSO p_vector ACCORDINGLY)
  h_matrix:     # fully constrained
    - [1, 0, 0, 0, 0, 0]
    - [0, 1, 0, 0, 0, 0]
    - [0, 0, 1, 0, 0, 0]
    - [0, 0, 0, 1, 0, 0]
    - [0, 0, 0, 0, 1, 0]
    - [0, 0, 0, 0, 0, 1]
  h_matrix_2:   # position constrained
    - [1, 0, 0, 0, 0, 0]
    - [0, 1, 0, 0, 0, 0]
    - [0, 0, 1, 0, 0, 0]
  # The following list of arrays is the minimization weight matrix A tilde
  a_tilde_matrix:
    - [100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    - [0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    - [0, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    - [0, 0, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    - [0, 0, 0, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0]
    - [0, 0, 0, 0, 0, 10, 0, 0, 0, 0, 0, 0, 0]
    - [0, 0, 0, 0, 0, 0, 10, 0, 0, 0, 0, 0, 0]
    - [0, 0, 0, 0, 0, 0, 0, 10000, 0, 0, 0, 0, 0]
    - [0, 0, 0, 0, 0, 0, 0, 0, 10000, 0, 0, 0, 0]
    - [0, 0, 0, 0, 0, 0, 0, 0, 0, 10000, 0, 0, 0]
    - [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10000, 0, 0]
    - [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10000, 0]
    - [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10000]
  # The following array is the desired x motion
  x_d:
    # - [0.1, 0.001, 0, -0.001, 0, -0.005, 0, 0, 0, 0, 0, 0, 0]  # for going down with wrist
    - [0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]                 # for simple grasp?
    # - [0.1, 0.01, 0, -0.01, 0, -0.05, 0, 0, 0, 0, 0, 0, 0]      # for other fingers mainly?
    # - [0.1, 0, 0, -0.01, 0.05, 0, 0, 0, 0, 0, 0, 0, 0]          # for thumb mainly?
    # - [0.5, 0.00, 0, -0.05, 0, -0.09, 0, 0, 0, 0, 0, 0, 0]      # random stuff 1
    # - [0.5, 0.00, 0, -0.05, 0, 0.00, 0, 0, 0, 0, 0, 0, 0]       # random stuff 2
  x_d_2:
    - [0.0, 0.01, 0, -0.01, 0, -0.05, 0, 0, 0, 0, 0, 0, 0]      # for two finger contacts
  # The rate of the adaptive loop
  spin_rate: 1000.0
  # The topic where the object pose is published
  object_topic_name: "/object_pose"
  # The scaling factor for the reference motion
  scaling: 1.0
  # The permutation vector for relaxed minimization (the elements of the vector stand for the reordering of the rows of Q) (CHANGE ALSO h_matrix ACCORDINGLY)
  p_vector:
    # - [19, 17, 18, 5, 6, 7, 2, 3, 4, 16, 14, 15, 8, 9, 10, 11, 12, 13, 1]              # Giorgio order - OK 1 touch (only position), NOT OK more touches (strange)
    # - [5, 6, 7, 2, 3, 4, 19, 17, 18, 16, 14, 15, 8, 9, 10, 11, 12, 13, 1]              # George First order - NOT BAD for middle but hand goes up for thumb
    # - [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 19, 17, 18, 16, 14, 15, 1]              # George Second order - NOT BAD for middle but thumb not still - 2 fingers ok
    # - [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 17, 18, 19, 15, 16, 14]              # Old order -
      - [2, 3, 4, 5, 6, 7, 19, 17, 18, 11, 12, 13, 8, 9, 10, 16, 14, 15, 1]              # For RP
  p_vector_2:
    - [2, 3, 1]                       # position constrained
  # The vector containing the indexes of the touch constraints
  touch_indexes:
    - [14, 15, 16, 17, 18, 19]
  # The threshold on the synergy joint value for stopping the grasping motion
  syn_thresh: 0.8
  # The bool to decide if null twist should be sent when relaxation occurs
  relax_to_zero: false
  # The bool to decide if to change contact selection when touch occurs
  touch_change: true
  # The number of tasks for the RP Manger (Contact Preserver) if num_tasks == 2 -> basic two tasks relaxation RP
  num_tasks: 6
  # The dimensions of the tasks for the RP Manger (Contact Preserver)
  # Please remember that the last tasks dimension changes because no of contacts (so, all the exceeding and remaining rows will be included)
  # dim_tasks: [1, 6, 6, 6]  # PLEASE DOUBLE CHECK THIS SO THAT IT COMPLIES WITH num_tasks
  dim_tasks: [1, 3, 3, 3, 3, 6]  # PLEASE DOUBLE CHECK THIS SO THAT IT COMPLIES WITH num_tasks
  # The priority of the above defined tasks
  # prio_tasks: [2, 4, 3, 1]  # PLEASE DOUBLE CHECK THIS SO THAT IT COMPLIES WITH num_tasks
  prio_tasks: [2, 5, 6, 3, 4, 1]  # PLEASE DOUBLE CHECK THIS SO THAT IT COMPLIES WITH num_tasks
  # The lambda max for the pseudo inversion in RP Manager
  lambda_max: 0.01
  # The epsilon for the diagonal loading in singular value decomposition in RP Manager
  epsilon: 0.0001


